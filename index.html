<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TALKING PLANET (Safe Mode)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” (ì•ˆì „í•˜ê²Œ ê³ ì •ê°’ ì‚¬ìš©) */
        body {
            background-color: #0c1225; /* ì§„í•œ ë‚¨ìƒ‰ ë°°ê²½ ê³ ì • */
            color: #ffffff;
            font-family: sans-serif; /* ê¸°ë³¸ í°íŠ¸ ì‚¬ìš© */
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* ë³„ ë°°ê²½ (CSSë¡œ ì§ì ‘ ê·¸ë¦¼) */
        .stars {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                radial-gradient(white 1px, transparent 1px),
                radial-gradient(rgba(255,255,255,0.5) 2px, transparent 2px);
            background-size: 500px 500px, 200px 200px;
            z-index: -1; /* ë§¨ ë’¤ë¡œ ë³´ëƒ„ */
            animation: moveStars 100s linear infinite;
        }
        @keyframes moveStars { from { background-position: 0 0; } to { background-position: 500px 500px; } }

        /* ë¡œê·¸ì¸ ë°•ìŠ¤ (ê°€ì¥ í™•ì‹¤í•˜ê²Œ ë³´ì´ë„ë¡ ì„¤ì •) */
        #loginSection {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            background: rgba(12, 18, 37, 0.8); /* ë°°ê²½ ë°˜íˆ¬ëª… */
            z-index: 9999;
        }

        .login-box {
            background: #ffffff; /* í°ìƒ‰ ë°°ê²½ ê³ ì • */
            padding: 40px;
            border-radius: 20px;
            width: 350px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .logo-text {
            color: #6C5CE7;
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 30px;
            letter-spacing: 2px;
        }

        input {
            width: 100%; padding: 15px; margin-bottom: 10px;
            border: 2px solid #ddd; border-radius: 10px;
            font-size: 16px; box-sizing: border-box;
            color: #333; /* ê¸€ììƒ‰ ê²€ì • ê³ ì • */
        }

        button {
            width: 100%; padding: 15px; margin-top: 10px;
            background: #6C5CE7; color: white;
            border: none; border-radius: 10px;
            font-size: 18px; font-weight: bold; cursor: pointer;
        }
        button:hover { background: #5a4bcf; }

        /* ëŒ€ì‹œë³´ë“œ (ì²˜ìŒì—” ìˆ¨ê¹€) */
        #dashboardSection { display: none; width: 100%; height: 100%; flex-direction: column; }
        
        .navbar {
            padding: 20px; background: rgba(255,255,255,0.1);
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .grid-container {
            flex: 1; padding: 30px; overflow-y: auto;
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
            max-width: 1200px; margin: 0 auto; width: 100%; box-sizing: border-box;
        }

        .app-card {
            background: white; border-radius: 15px; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
            text-decoration: none; color: #333; min-height: 180px; justify-content: center;
            transition: 0.2s;
        }
        .app-card:hover { transform: translateY(-5px); background: #f0f0ff; }
        
        .icon { font-size: 40px; color: #6C5CE7; margin-bottom: 15px; }
        .title { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
        .desc { font-size: 13px; color: #666; text-align: center; }
        .badge { background: #ff4757; color: white; padding: 3px 8px; border-radius: 10px; font-size: 11px; margin-bottom: 5px; }

        @media(max-width:800px){ .grid-container{ grid-template-columns: 1fr 1fr; } }
    </style>
</head>
<body>

    <!-- ë³„ ë°°ê²½ (CSS) -->
    <div class="stars"></div>

    <!-- 1. ë¡œê·¸ì¸ ì„¹ì…˜ -->
    <div id="loginSection">
        <div class="login-box">
            <div class="logo-text">TALKING PLANET</div>
            <!-- ì•„ì´ì½˜ ë¡œë”© ì‹¤íŒ¨ ëŒ€ë¹„ í…ìŠ¤íŠ¸ ë¼ë²¨ ì¶”ê°€ -->
            <input type="text" id="id" placeholder="ID: teacher">
            <input type="password" id="pw" placeholder="PW: 1234">
            <button onclick="login()">LOGIN (ì…ì¥)</button>
        </div>
    </div>

    <!-- 2. ëŒ€ì‹œë³´ë“œ -->
    <div id="dashboardSection">
        <div class="navbar">
            <div style="font-weight:bold; font-size:20px;">ğŸª TALKING PLANET</div>
            <div onclick="location.reload()" style="cursor:pointer; font-size:14px;">Logout</div>
        </div>
        <div class="grid-container" id="grid">
            <div style="grid-column:1/-1; text-align:center; padding-top:50px;">
                Connecting to Google Sheet...
            </div>
        </div>
    </div>

<script>
    // í˜ì´ì§€ ë¡œë”© í™•ì¸ìš© (ì‹¤í–‰ë˜ë©´ ì•Œë¦¼ì°½ì´ ëœ¹ë‹ˆë‹¤)
    // window.onload = function() { console.log("System Loaded"); }

    const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTZAu0zoItDXQX63263Ew6wk2TuZbHVkoRGse56uTAdWc6Cy9hlU_VazNkRsNn2-yqcbkC5YPZ2dvys/pub?gid=0&single=true&output=csv";

    function login() {
        const id = document.getElementById('id').value;
        const pw = document.getElementById('pw').value;
        if(id === "teacher" && pw === "1234") {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'flex';
            loadData();
        } else {
            alert("ID: teacher / PW: 1234");
        }
    }
    
    // ì—”í„°í‚¤
    document.getElementById('pw').addEventListener('keypress', (e)=>{if(e.key==='Enter')login()});

    async function loadData() {
        try {
            const res = await fetch(SHEET_URL + "&t=" + Date.now());
            const text = await res.text();
            const rows = text.split('\n');
            const grid = document.getElementById('grid');
            grid.innerHTML = "";

            for(let i=1; i<rows.length; i++) {
                const cols = rows[i].split(',');
                if(cols.length < 2) continue;
                
                const name = cols[0].trim();
                const url = cols[1].trim();
                const desc = cols[2]?.replace(/"/g,'').trim() || "";
                const iconStr = cols[3]?.trim() || "star";
                const badge = cols[4]?.trim();

                if(!name) continue;

                const a = document.createElement('a');
                a.className = 'app-card';
                a.href = url;
                a.target = "_blank";

                // ì•„ì´ì½˜ ë§¤í•‘
                const icons = {
                    'search': 'fa-search', 'game': 'fa-gamepad', 'video': 'fa-video',
                    'book': 'fa-book-open', 'star': 'fa-star', 'rocket': 'fa-rocket'
                };
                const iconClass = icons[iconStr] || 'fa-cube';

                let badgeHtml = badge ? `<div class="badge">${badge}</div>` : '';
                
                a.innerHTML = `
                    ${badgeHtml}
                    <i class="fas ${iconClass} icon"></i>
                    <div class="title">${name}</div>
                    <div class="desc">${desc}</div>
                `;
                grid.appendChild(a);
            }

        } catch(e) {
            document.getElementById('grid').innerHTML = `
                <div style="text-align:center; grid-column:1/-1; color:#ff6b6b; background:rgba(0,0,0,0.5); padding:20px; border-radius:10px;">
                    <strong>ì—°ê²° ì‹¤íŒ¨</strong><br>
                    ì´ íŒŒì¼ì„ ì„œë²„(Netlify ë“±)ì— ì˜¬ë ¤ì£¼ì„¸ìš”.<br>
                    (ë¡œì»¬ íŒŒì¼ì—ì„œëŠ” ë³´ì•ˆ ë¬¸ì œë¡œ ë°ì´í„° ë¡œë”©ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤)
                </div>
            `;
        }
    }
</script>

</body>
</html>
